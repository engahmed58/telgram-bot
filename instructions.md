# تعليمات إعداد واستخدام بوت تلجرام للاشتراك الإجباري

## مقدمة
هذا البوت مصمم للتحقق من اشتراك المستخدمين في قناة محددة قبل السماح لهم بالتفاعل في المجموعة. يقوم البوت بحذف رسائل المستخدمين غير المشتركين وإرسال تنبيه خاص لهم مع رابط للاشتراك في القناة المطلوبة.

## متطلبات التشغيل
1. توكن بوت تلجرام من BotFather
2. استضافة لتشغيل البوت (سنستخدم Render)
3. قناة تلجرام (عامة أو خاصة) للاشتراك الإجباري
4. مجموعة تلجرام لإضافة البوت إليها

## خطوات الإعداد

### 1. إنشاء بوت جديد على تلجرام
1. افتح تطبيق تلجرام وابحث عن @BotFather
2. أرسل الأمر `/newbot` لإنشاء بوت جديد
3. اتبع التعليمات لتحديد اسم البوت واسم المستخدم الخاص به
4. احفظ توكن البوت الذي سيظهر لك (مثال: `123456789:ABCdefGhIJKlmNoPQRsTUVwxyZ`)

### 2. إعداد القناة المطلوبة
1. تأكد من أن لديك قناة تلجرام جاهزة (يمكنك إنشاء واحدة جديدة إذا لزم الأمر)
2. أضف البوت كمشرف في القناة مع صلاحيات "إضافة أعضاء"
3. احصل على معرف القناة (يبدأ بـ @ للقنوات العامة، أو يمكنك استخدام الرابط للقنوات الخاصة)

### 3. نشر البوت على منصة Render
1. قم بإنشاء حساب على [Render](https://render.com/) إذا لم يكن لديك حساب
2. انقر على "New" ثم اختر "Web Service"
3. اختر "Build and deploy from a Git repository"
4. قم بربط حساب GitHub الخاص بك واختر مستودع المشروع
5. املأ المعلومات التالية:
   - Name: اسم للخدمة (مثل "telegram-subscription-bot")
   - Environment: Python
   - Build Command: `pip install -r requirements.txt`
   - Start Command: `cd src && python __init__.py`
6. أضف متغير البيئة التالي:
   - Key: `TELEGRAM_TOKEN`
   - Value: توكن البوت الذي حصلت عليه من BotFather
7. انقر على "Create Web Service"

### 4. إضافة البوت إلى المجموعة
1. أضف البوت إلى المجموعة المستهدفة
2. قم بترقية البوت إلى مشرف مع صلاحيات "حذف الرسائل"
3. استخدم الأمر `/setchannel` في المجموعة لتعيين القناة المطلوبة للاشتراك
4. اختبر البوت بإرسال رسالة في المجموعة من حساب غير مشترك في القناة

## أوامر البوت

### للمستخدمين العاديين
- `/start` - بدء استخدام البوت وعرض معلومات المساعدة

### للمشرفين فقط
- `/setchannel` - تعيين القناة المطلوبة للاشتراك
- `/setmessage [النص]` - تخصيص رسالة التنبيه للمستخدمين غير المشتركين
- `/status` - عرض حالة البوت والإعدادات الحالية

## كيفية عمل البوت
1. عندما يرسل مستخدم رسالة في المجموعة، يتحقق البوت من اشتراكه في القناة المحددة
2. إذا كان المستخدم غير مشترك، يقوم البوت بحذف الرسالة وإرسال تنبيه خاص للمستخدم
3. يحتوي التنبيه على زر للاشتراك في القناة وزر للتحقق من الاشتراك
4. بعد الاشتراك، يمكن للمستخدم النقر على زر "تحقق من الاشتراك" للتأكيد
5. إذا تم التأكيد، يمكن للمستخدم الآن التفاعل في المجموعة بحرية

## استكشاف الأخطاء وإصلاحها
- **البوت لا يحذف الرسائل**: تأكد من أن البوت مشرف في المجموعة مع صلاحية "حذف الرسائل"
- **البوت لا يتحقق من الاشتراك بشكل صحيح**: تأكد من أن البوت عضو في القناة المطلوبة
- **رسائل الخطأ في سجلات Render**: تحقق من سجلات الخدمة على Render لمعرفة أي أخطاء محتملة

## ملاحظات هامة
- يجب أن يكون البوت مشرفًا في كل من المجموعة والقناة المطلوبة
- لا يمكن للبوت التحقق من الاشتراك في القنوات التي ليس عضوًا فيها
- للقنوات الخاصة، تأكد من استخدام معرف القناة الصحيح (يمكنك الحصول عليه من إعدادات القناة)
